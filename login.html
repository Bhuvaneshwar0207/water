<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - AquaStore</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-light">
    <div class="container">
        <div class="row justify-content-center align-items-center min-vh-100">
            <div class="col-md-6 col-lg-5 royal-zoom-in">
                <div class="card shadow-lg border-0" style="background: linear-gradient(135deg, #ffffff, #f8f9fa);">
                    <div class="card-body p-5">
                        <!-- Login Type Tabs -->
                        <ul class="nav nav-tabs mb-4" id="loginTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="user-tab" data-bs-toggle="tab" data-bs-target="#user-login" type="button" role="tab">
                                    <i class="fas fa-user"></i> User Login
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="admin-tab" data-bs-toggle="tab" data-bs-target="#admin-login" type="button" role="tab">
                                    <i class="fas fa-shield-alt"></i> Admin Login
                                </button>
                            </li>
                        </ul>

                        <!-- Tab Content -->
                        <div class="tab-content" id="loginTabContent">
                            <!-- User Login Tab -->
                            <div class="tab-pane fade show active" id="user-login" role="tabpanel">
                                <div class="text-center mb-4">
                                    <i class="fas fa-user-circle fa-3x mb-3" style="color: var(--royal-blue);"></i>
                                    <h4 style="color: var(--royal-blue); font-weight: bold;">User Login</h4>
                                    <p class="text-muted">Sign in to your AquaStore account</p>
                                </div>
                                
                                <form onsubmit="login(event)">
                                    <div class="mb-3">
                                        <label for="email" class="form-label">Email Address</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-envelope"></i>
                                            </span>
                                            <input type="email" class="form-control" id="email" required>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="password" class="form-label">Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-lock"></i>
                                            </span>
                                            <input type="password" class="form-control" id="password" required>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="remember">
                                        <label class="form-check-label" for="remember">
                                            Remember me
                                        </label>
                                    </div>
                                    
                                    <button type="submit" class="btn w-100 btn-lg" style="background: linear-gradient(135deg, var(--royal-blue), var(--royal-purple)); color: white; border: none;">
                                        <i class="fas fa-sign-in-alt"></i> Sign In
                                    </button>
                                </form>
                            </div>

                            <!-- Admin Login Tab -->
                            <div class="tab-pane fade" id="admin-login" role="tabpanel">
                                <div class="text-center mb-4">
                                    <i class="fas fa-shield-alt fa-3x mb-3" style="color: var(--royal-purple);"></i>
                                    <h4 style="color: var(--royal-purple); font-weight: bold;">Admin Login</h4>
                                    <p class="text-muted">Access admin dashboard</p>
                                </div>
                                
                                <form onsubmit="adminLogin(event)">
                                    <div class="mb-3">
                                        <label for="adminUsername" class="form-label">Admin Username</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-user-shield"></i>
                                            </span>
                                            <input type="text" class="form-control" id="adminUsername" required>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="adminPassword" class="form-label">Admin Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-key"></i>
                                            </span>
                                            <input type="password" class="form-control" id="adminPassword" required>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="adminRemember">
                                            <label class="form-check-label" for="adminRemember">
                                                Remember admin session
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <!-- <div class="alert alert-info">
                                        <i class="fas fa-info-circle"></i>
                                        <strong>Demo Credentials:</strong><br>
                                        Username: admin<br>
                                        Password: admin123
                                    </div> -->
                                    
                                    <button type="submit" class="btn w-100 btn-lg" style="background: linear-gradient(135deg, var(--royal-purple), var(--royal-gold)); color: white; border: none;">
                                        <i class="fas fa-shield-alt"></i> Admin Login
                                    </button>
                                </form>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <p class="mb-0">Don't have an account? <a href="register.html" class="text-primary">Register here</a></p>
                            <a href="index.html" class="text-muted">
                                <i class="fas fa-arrow-left"></i> Back to Home
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Fallback notification function
        function showNotification(message, type = 'success') {
            // Try the main function first
            if (typeof window.showNotification === 'function') {
                window.showNotification(message, type);
                return;
            }
            
            // Fallback: Create a simple notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                z-index: 99999;
                padding: 15px 25px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                min-width: 300px;
                text-align: center;
                animation: slideDown 0.5s ease;
            `;
            
            if (type === 'success') {
                notification.style.background = 'linear-gradient(135deg, #28a745, #20c997)';
            } else if (type === 'danger') {
                notification.style.background = 'linear-gradient(135deg, #dc3545, #c82333)';
            } else if (type === 'warning') {
                notification.style.background = 'linear-gradient(135deg, #ffc107, #e0a800)';
                notification.style.color = '#333';
            } else {
                notification.style.background = 'linear-gradient(135deg, #007bff, #6B46C1)';
            }
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer; margin-left: 15px;">&times;</button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
        
        // Add slide down animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                to { opacity: 1; transform: translateX(-50%) translateY(0); }
            }
        `;
        document.head.appendChild(style);

        // Check if user is already logged in
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
        });

        function checkLoginStatus() {
            const savedUser = localStorage.getItem('aquaStoreCurrentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                // If user is already logged in, redirect to appropriate page
                if (currentUser.role === 'admin') {
                    window.location.href = 'admin_dashboard.html';
                } else {
                    window.location.href = 'index.html';
                }
            }
        }

        // Admin login function
        function adminLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            const remember = document.getElementById('adminRemember').checked;
            
            // Debug: Check if showNotification function exists
            if (typeof showNotification === 'undefined') {
                alert('showNotification function not found!');
                return;
            }
            
            // Validate admin credentials
            if (username === 'admin' && password === 'admin123') {
                // Create admin session
                const adminUser = {
                    id: 'admin_001',
                    username: username,
                    email: 'admin@aquastore.com',
                    role: 'admin',
                    fullName: 'Administrator',
                    isLoggedIn: true,
                    loginTime: new Date().toISOString()
                };
                
                // Save admin session
                localStorage.setItem('aquaStoreCurrentUser', JSON.stringify(adminUser));
                currentUser = adminUser;
                
                // Show success message
                console.log('Showing notification...');
                showNotification('Admin login successful! Redirecting to dashboard...', 'success');
                
                // Redirect to admin dashboard
                setTimeout(() => {
                    window.location.href = 'admin_dashboard.html';
                }, 1500);
                
            } else {
                // Show error message
                showNotification('Invalid admin credentials! Please try again.', 'danger');
                
                // Clear password field
                document.getElementById('adminPassword').value = '';
            }
        }
    </script>
</body>
</html>
